requirejs.config({paths:{chart:"/blocks/completion_progress/thirdparty/Chart"}}),define(["jquery","chart"],function(a){var b=[],c={drawChart:function(c,d,e,f){for(var g=a.parseJSON(e),h=g.activities.length,i=[],j=[],k=[],l=g.colors.completed_colour,m=g.colors.notCompleted_colour,n=g.colors.submittednotcomplete_colour,o=g.colors.futureNotCompleted_colour,p=0;p<h;p++){i.push(g.activities[p].name),j.push("1"),b.push(g.activities[p].link);var q=g.activities[p].status;switch(q){case"complete":k.push(l);break;case"passed":k.push(l);break;case"failed":k.push(o);break;case"submitted":k.push(n);break;default:k.push(m)}}Chart.pluginService.register({beforeDraw:function(a){if(a.config.options.elements.center){var b=a.chart.ctx,c=a.config.options.elements.center,d=c.fontStyle||"Arial",e=c.text,f=c.color||"#000",g=c.sidePadding||20,h=g/100*(2*a.innerRadius);b.font="30px "+d;var i=b.measureText(e).width,j=2*a.innerRadius-h,k=j/i,l=Math.floor(30*k),m=2*a.innerRadius,n=Math.min(l,m);b.textAlign="center",b.textBaseline="middle";var o=(a.chartArea.left+a.chartArea.right)/2,p=(a.chartArea.top+a.chartArea.bottom)/2;b.font=n+"px "+d,b.fillStyle=f,b.fillText(e,o,p)}}});var r={labels:i,datasets:[{label:"Completions",data:j,backgroundColor:k}]},s=document.getElementById(c).getContext("2d"),t="";1==f&&(t=g.percentage+"%");var u=new Chart(s,{type:d,data:r,options:{elements:{center:{text:t,color:"#000000",fontStyle:"Arial",sidePadding:40}},legend:{display:!1},tooltips:{callbacks:{label:function(a,b){String.prototype.trunc=function(a){return this.substr(0,a-1)+(this.length>a?"...":"")};var c=(b.datasets[a.datasetIndex].data,b.labels[a.index]);return c.trunc(15)}}}}});a(document).ready(function(){var a=document.getElementById(c);a.onclick=function(a){var c=u.getElementsAtEvent(a),d=(c[0]._chart.config.data,c[0]._index),e=b[d];return window.location.href=e,!1}})},drawBar:function(c,d){for(var e=a.parseJSON(d),f=e.activities.length,g=[],h=[],i=[],j=e.colors.completed_colour,k=e.colors.notCompleted_colour,l=e.colors.submittednotcomplete_colour,m=e.colors.futureNotCompleted_colour,n=0;n<f;n++){g.push(e.activities[n].name),h.push("1"),b.push(e.activities[n].link);var o=e.activities[n].status;switch(o){case"complete":i.push(j);break;case"passed":i.push(j);break;case"failed":i.push(m);break;case"submitted":i.push(l);break;default:i.push(k)}}var p={labels:g,datasets:[{label:"Completions",data:h,backgroundColor:i}]},q=document.getElementById(c).getContext("2d");Chart.defaults.global.tooltips.enabled=!1;var r=new Chart(q,{type:"horizontalBar",data:p,options:{scales:{xAxes:[{ticks:{fontFamily:"'Open Sans Bold', sans-serif",fontSize:11,display:!1},scaleLabel:{display:!1},gridLines:{display:!1},stacked:!0}],yAxes:[{gridLines:{display:!1,color:"#fff",zeroLineColor:"#fff",zeroLineWidth:0},ticks:{fontFamily:"'Open Sans Bold', sans-serif",fontSize:11},stacked:!0}]},legend:{display:!1}}});a(document).ready(function(){var a=document.getElementById(c);a.onclick=function(a){var c=r.getElementsAtEvent(a),d=(c[0]._chart.config.data,c[0]._index),e=b[d];return window.location.href=e,!1}})}};return c});